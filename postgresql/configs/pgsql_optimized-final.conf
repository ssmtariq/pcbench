# APPEND THE FOLLOWING IN THE END OF DEFAULT CONFIGS, TURN OFF EXISTING CONFIGS THAT CHANGED IN THE CUSTOMIZED VERSION
#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

# Add settings for extensions here
autovacuum = on
autovacuum_analyze_scale_factor = 45.52456025950534
autovacuum_analyze_threshold = 589
autovacuum_freeze_max_age = 1599010310
autovacuum_max_workers = 3685
autovacuum_multixact_freeze_max_age = 1039435870
autovacuum_naptime = 1908180
autovacuum_vacuum_cost_delay = 63
autovacuum_vacuum_cost_limit = 2735
autovacuum_vacuum_insert_scale_factor = 93.16266340797213
autovacuum_vacuum_insert_threshold = 56972
autovacuum_vacuum_scale_factor = 83.79508782022135
autovacuum_vacuum_threshold = 1731966281
autovacuum_work_mem = 704292
backend_flush_after = 77

# writer cadence / LRU
bgwriter_delay = 200
bgwriter_flush_after = 256
# bgwriter_lru_maxpages = 670
bgwriter_lru_maxpages = 512
bgwriter_lru_multiplier = 4.20135529585156

# smoother, more frequent checkpoints, larger WAL headroom
# checkpoint_completion_target = 0.3229489310459355
checkpoint_completion_target = 0.9
checkpoint_flush_after = 256
checkpoint_timeout = 1800

# per-tx commit hygiene (avoid useless delays at low concurrency)
commit_delay = 0
commit_siblings = 0

cpu_index_tuple_cost = 1.9687497077711344
cpu_operator_cost = 0.10765697591836432
cpu_tuple_cost = 0.4341563412041003
cursor_tuple_fraction = 0.8539070543659134
data_sync_retry = on
deadlock_timeout = 1554
default_statistics_target = 3562
# effective_cache_size = 807316
effective_cache_size = 16777216
effective_io_concurrency = 207
enable_async_append = on
enable_bitmapscan = on
enable_gathermerge = off
enable_hashagg = on
enable_hashjoin = on
enable_incremental_sort = on
enable_indexonlyscan = on
enable_indexscan = on
enable_material = on
enable_memoize = on
enable_mergejoin = on
enable_nestloop = on
enable_parallel_append = off
enable_parallel_hash = off
enable_partition_pruning = on
enable_partitionwise_aggregate = off
enable_partitionwise_join = on
enable_presorted_aggregate = off
# enable_seqscan = off
enable_seqscan = on
enable_sort = on
enable_tidscan = off
from_collapse_limit = 35

# reliability on (protects against torn pages)
full_page_writes = on

geqo = on
geqo_effort = 4
geqo_generations = 670
geqo_pool_size = 623
geqo_seed = 0.27182068206906584
geqo_selection_bias = 1.5475327664762384
geqo_threshold = 42
hash_mem_multiplier = 17.61640831506994

# JIT off for short, low-concurrency runs (reduces overhead)
jit = off
jit_above_cost = 692407
jit_inline_above_cost = 1654123
jit_optimize_above_cost = 3659172

join_collapse_limit = 7
logical_decoding_work_mem = 269807
maintenance_io_concurrency = 467
maintenance_work_mem = 642705
# max_connections = 4058
max_connections = 300
max_files_per_process = 42857
max_locks_per_transaction = 692
max_parallel_maintenance_workers = 46
max_parallel_workers = 69
# max_parallel_workers_per_gather = 225
max_parallel_workers_per_gather = 8
max_pred_locks_per_page = 959
max_pred_locks_per_relation = 689
max_pred_locks_per_transaction = 550
max_prepared_transactions = 933
max_stack_depth = 5105

# more WAL headroom (MB)
max_wal_size = 16384

max_worker_processes = 181
min_dynamic_shared_memory = 14220
min_parallel_index_scan_size = 7179
min_parallel_table_scan_size = 70136
min_wal_size = 109
old_snapshot_threshold = 20102
parallel_leader_participation = on
parallel_setup_cost = 1358.6372154299008
parallel_tuple_cost = 0.18576673468649885
quote_all_identifiers = on
random_page_cost = 2.041452955676685
recursive_worktable_factor = 972.3211857858018
seq_page_cost = 2.0107447350006815

# shared buffers already 8 GiB (in 8kB pages)
# shared_buffers = 373067
shared_buffers = 1048576

temp_buffers = 57565
temp_file_limit = 52671
vacuum_buffer_usage_limit = 2446659
vacuum_cost_delay = 8
vacuum_cost_limit = 5687
vacuum_cost_page_dirty = 7794
vacuum_cost_page_hit = 4101
vacuum_cost_page_miss = 5347
vacuum_failsafe_age = 1693398118
vacuum_freeze_min_age = 651667908
vacuum_multixact_failsafe_age = 1214629555
vacuum_multixact_freeze_min_age = 893624447
vacuum_multixact_freeze_table_age = 329229199

# WAL buffers (in 8kB pages): 65536 = 512 MiB
wal_buffers = 65536

# compress full-page writes; helps when full_page_writes=on
wal_compression = on
wal_decode_buffer_size = 866821191
wal_init_zero = off
wal_log_hints = off
wal_recycle = on
wal_skip_threshold = 124989

# WAL writer cadence
wal_writer_delay = 200
wal_writer_flush_after = 2048

# work_mem stays modest to avoid memory blow-ups
# work_mem = 113901
work_mem = 16384
